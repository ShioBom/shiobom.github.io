---
title: 聊一聊移动端适配
date: 2019-10-20 16:31:26
tags:
---

### 移动端适配

**Viewport的四个单位**
- vw：1vw等于window.innerWidth的1%
- vh：1vh等于window.innerHeight的1%
- vmin：vmin的值是当前vw和vh中较小的值
- vmax：vmax的值是当前vw和vh中较大的值

**vw 适合处理的情况**
- 容器适配
- 文本适配
- 大于 1px 的边框、圆角、阴影
- 内边距和外边距

**根据设计图上的px值直接转换成对应的vw值**
- 通过传统的计算
- 通过PostCSS的插件`postcss-px-to-viewport`

相关配置
```json
"postcss-px-to-viewport": { 
	viewportWidth: 750, // 设计稿宽度
	viewportHeight: 1334, // 设计稿高度
	unitPrecision: 5, 
	viewportUnit: 'vw', 
	selectorBlackList: [],
	 minPixelValue: 1, 
	 mediaQuery: false 
 }
```
[post-px-to-viewport官方文档](https://github.com/evrone/postcss-px-to-viewport)

**容器的长宽比缩放**

可以使用 postCSS 插件 `postcss-aspect-ratio-mini`,本地安装一下就可以使用

```
yarn add postcss-aspect-ratio-mini
```
针对 img、vedio、iframe元素

**解决1px方案**

- transform + 伪类标签
==缺点==：占据了伪元素

```stylus
.border-1px-one{
    position: relative;
    padding 10px
    &::before{
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        width: 200%;
        border:1px solid red;
        color: red;
        height: 200%;
        -webkit-transform-origin: left top;
        transform-origin: left top; // 一个元素变形的点
        -webkit-transform: scale(0.5);
        transform: scale(0.5);
        pointer-events: none; /* 防止点击触发，指示该元素不是鼠标事件的目标 */
        box-sizing: border-box;
        @media screen and (min-device-pixel-ratio:3),(-webkit-min-device-pixel-ratio:3){
        width: 300%;
        height: 300%;
        -webkit-transform: scale(0.33);
        transform: scale(0.33);
        }
  }
```

- box-shadow：利用阴影来模拟边框

```stylus
 padding 10px
 box-shadow: 0px 0px 1px 0px red inset;
```

- border-image
==缺点==：替换图片麻烦

```stylus
    border: 1px solid transparent;
    border-image: url('../../assets/border.png') 2 repeat;
```

- background

```stylus
	background: url(../../assets/border.png) repeat-x left bottom;
	-webkit-background-size: 100% 1px;
	background-size: 100% 1px;
```

- 使用`postcss-write-svg`插件

下图是通过四种不同方式解决 1px 问题的效果图

![Alt text](./localhost_8080_iPhone X.png)

### 移动端适配的相关文章

- [如何在Vue项目中使用vw实现移动端适配](https://www.jianshu.com/p/1f1b23f8348f?tdsourcetag=s_pctim_aiomsg)
- [移动前端开发之viewport的深入理解](https://www.cnblogs.com/2050/p/3877280.html?tdsourcetag=s_pctim_aiomsg)
- [移动端适配viewport的概念与理解](https://blog.csdn.net/Jutal_ljt/article/details/86306330?tdsourcetag=s_pctim_aiomsg)
- [转再聊移动端页面的适配](https://blog.csdn.net/qq_21729177/article/details/79466951?tdsourcetag=s_pctim_aiomsg)
- [网页适配 iPhoneX，就是这么简单](https://aotu.io/notes/2017/11/27/iphonex/)
